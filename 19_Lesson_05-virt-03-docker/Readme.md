# Домашнее задание к занятию "5.3. Введение. Экосистема. Архитектура. Жизненный цикл Docker контейнера"

## Задача 1

Сценарий выполения задачи:

- создайте свой репозиторий на https://hub.docker.com;
- выберете любой образ, который содержит веб-сервер Nginx;
- создайте свой fork образа;
- реализуйте функциональность:
запуск веб-сервера в фоне с индекс-страницей, содержащей HTML-код ниже:
```
<html>
<head>
Hey, Netology
</head>
<body>
<h1>I’m DevOps Engineer!</h1>
</body>
</html>
```
Опубликуйте созданный форк в своем репозитории и предоставьте ответ в виде ссылки на https://hub.docker.com/username_repo.

###<b>Вполнено, ссылка на репозиторий https://hub.docker.com/r/iaberesnev/netology </b>
Строка запуска, проверка работы контейнера.
```commandline
root@90nbk0714:/home/yolo# docker run --name ili4ngi -d -p 8080:80 iaberesnev/netology
bd6dcf9a3ea0a16a20a80a9e76961bd7dc14c7887e1c98af87a67f7115731471
root@90nbk0714:/home/yolo# docker ps
CONTAINER ID   IMAGE                 COMMAND                  CREATED         STATUS         PORTS                                   NAMES
bd6dcf9a3ea0   iaberesnev/netology   "/docker-entrypoint.…"   5 seconds ago   Up 4 seconds   0.0.0.0:8080->80/tcp, :::8080->80/tcp   ili4ngi
```
Запросим содержимое веб-страницы через cURL и WEB-browser.
```commandline
root@90nbk0714:/home/yolo# curl localhost:8080
<html>
<head>
Hey, Netology
</head>
<body>
<h1>I'm DevOps Engineer!</h1>
</body>
</html>root@90nbk0714:/home/yolo# 
```
<br>
WEB-Browser  

![nginx!](/19_Lesson_05-virt-03-docker/images/nginxscreen.png)<br>

## Задача 2

Посмотрите на сценарий ниже и ответьте на вопрос:
"Подходит ли в этом сценарии использование Docker контейнеров или лучше подойдет виртуальная машина, физическая машина? Может быть возможны разные варианты?"

Детально опишите и обоснуйте свой выбор.

--

Сценарий:  
Предложения  
- Высоконагруженное монолитное java веб-приложение;   
Физическая машина если высокая нагрузка, но теряем в отказоусточивости. Виртуальная машина - но переплатим за мощности для получения аналогичной производительности. Если приложение позволяет себя корректно масштабировать, то можно попробовать и контейнер.
- Nodejs веб-приложение;  
Docker - как основной вариант. Виртуальная машина и физическая будут дороже и хуже маштабироваться и тратить на много больше денег впустую. Переплата за накладные ресурсы ОС.
- Мобильное приложение c версиями для Android и iOS;  
  Два разных Docker-контейнера, Две разные вируталные машины. Две разные физические машины. Разные ядра у ОС.
- Шина данных на базе Apache Kafka;  
Лучше вирутальная машина, либо Docker, но с отдельным примонтированным хранилищем. Можно и на физическом сервере.
- Elasticsearch кластер для реализации логирования продуктивного веб-приложения - три ноды elasticsearch, два logstash и две ноды kibana;  
Docker - наиболее оптимальный вариант, физически и/или виртуальных машин понадобиться слишком много. Отдельные виртуальным машины имеет смысл использовать только под высокую нагрузку.
- Мониторинг-стек на базе Prometheus и Grafana;  
Docker - наиболее оптимальный вариант, но можно и виртуальные машины. Физическая тоже подойдет.  
- MongoDB, как основное хранилище данных для java-приложения;  
Docker но с отдельным монтированным хранилищем для БД, Виртуальная или физическая машины, выйграем в скорости работы, но усложним ситуацию для масштабирования и отказоусточивости.  
- Gitlab сервер для реализации CI/CD процессов и приватный (закрытый) Docker Registry.  
Можно любой из представленных вариантов. Но в случае Docker предусмотреть отдельные Volume для хранения данных.

## Задача 3

- Запустите первый контейнер из образа ***centos*** c любым тэгом в фоновом режиме, подключив папку ```/data``` из текущей рабочей директории на хостовой машине в ```/data``` контейнера;  
Создаем образ `docker run -d -v $(pwd)/data:/data centos  /bin/bash -c "sleep 1000"`   
Sleep необходим чтоб контейнер не выключился после запуска.  
- Запустите второй контейнер из образа ***debian*** в фоновом режиме, подключив папку ```/data``` из текущей рабочей директории на хостовой машине в ```/data``` контейнера;  
Создаем образ `docker run -d -v $(pwd)/data:/data debian  /bin/bash -c "sleep 1000"`  
![dockerstart!](/19_Lesson_05-virt-03-docker/images/dockerStart.png)  
- Подключитесь к первому контейнеру с помощью ```docker exec``` и создайте текстовый файл любого содержания в ```/data```;  
![docker1!](/19_Lesson_05-virt-03-docker/images/docker1.png)  
- Добавьте еще один файл в папку ```/data``` на хостовой машине;  
![docker2!](/19_Lesson_05-virt-03-docker/images/host2.png)  
- Подключитесь во второй контейнер и отобразите листинг и содержание файлов в ```/data``` контейнера.  
![docker2!](/19_Lesson_05-virt-03-docker/images/docker2.png)  
  
## Задача 4 (*)

Воспроизвести практическую часть лекции самостоятельно.
Соберите Docker образ с Ansible, загрузите на Docker Hub и пришлите ссылку вместе с остальными ответами к задачам.
Собираем аналогичный Dockerfile.  
Ознакомиться [ТУТ](/19_Lesson_05-virt-03-docker/docker_task_4/Dockerfile) 
Ссылка на репозиторий с готовым образом.  
https://hub.docker.com/r/iaberesnev/netology_ansible
